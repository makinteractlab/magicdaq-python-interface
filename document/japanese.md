# Easy M&D

# 仕様書

# 必要なもの
- MAGICDAQ ((docs)[
https://magicdaq.github.io/magicdaq_docs/])
- オシロスコープ（測定データの検証のため）
- 適切な回路（主に電子回路です）
## ライブラリのインストール
以下のライブラリ等が必要です。インストールを完了してから下に進んでください。
- python
- pip
- magicdaq
- PyQt5
- numpy
- scipy
- matplotlib

あなたが```python -m pip list```を実行して、これらが正しくインストールされていれば完了です。それぞれ最新ヴァージョンにすることを勧めます。

# 使い方
GUIを起動するには```python play.py```と実行します。
Measure, Displayのタブがあります。
## Measure
電圧の測定が行えます。MAGICDAQに搭載されている８つのAnalog Input Pinから欲しいピンのみ選択してデータが取得できます。
- frequency: 測定する際の周波数を設定できます。
- Time Duration: 測定時間を設定できます。
- 'Choose File Location'ボタンからデータを保存するディレクトリを指定します。
- File Name: 保存するファイル名を指定します。実行後は自動的に設定したファイル名に日時が追加されて保存されます。これにより一意のデータが生成されます。
必要な変数をすべて入力すると'MEASURE'ボタンが押せるようになり、測定を開始できます。

測定後は計測したしたデータをGUI上で確認することができます。'View Graph'ボタンが押せるようになるのでクリックします。クリック後、別ウィンドウで計測データのグラフが表示されます。
最後に、計測したデータを保存するかしないか選択します。
- Save: 測定データを保存します。保存する際のファイル名は上記の通りです。
- Dismiss: 測定データを削除します。

'Save'ボタンか'Dismiss'ボタンを押すと再度計測できるようになります。

## Display
測定したデータをオシロスコープを用いてシュミレーションできます。
最初にシュミレートに必要なデータを取得するためにファイルを選択します。ここでは.csvファイルのみが選択することができます。
次に、出力するピンの設定をします。MAGICDAQにはアナログ信号の出力が２つあります(AO0, AO1)。それぞれを適切にオシロスコープに接続した(AO0にはCH1, AO1にはCH2を接続することを勧める)後、GUIのパラメータを操作します。出力に必要なピンのチェックボックスを選択したらパラメータ編集に移りましょう。
まずは、'Option'のパラメータを決めましょう。これは出力するデータを単一のデータにするか、２つのデータを算術計算したデータにするか設定できます。以下がで選択できます。
- S(single): 単一ピンのデータを出力します。デフォルトの設定です。
- +(addition): 選択された２つの測定データを足し合わせた値を一つの波形として出力します(a + b)。
- -(subtraction): 選択された２つのデータを用いて減算を行い、その結果を一つの波形として出力する(a - b)。
- x(multiplication): 選択された２つの測定データを掛け合わせた値を一つの波形として出力します(a * b)。
(注意: S以外のパラメータを選択した場合、出力可能な範囲である0-5[V]をオーバーする可能性があります。そのときは、出力可能範囲に収まるようにデータを調整します。具体的には0[V]以下の値は0[V]に、5[V]以上の値は5[V]に再設定します。)

最後にフィルターの設定をします。測定したデータに対してフィルターをかけてノイズを抑えることができます。選択可能なパラメータの中身は以下のようです。
- None: フィルターを適用しません。
- Low Pass Filter: butter worth filter を用いたlow pass filterを適用します。
- High Pass Filter: butter worth filter を用いたhigh pass filterを適用します。
(注意: フィルタを使用し，電圧の最小値が0[V]未満である場合は，データの最小値が0[V]になるようにすべてのデータを調整します。フィルタを使用し，データの最大値が5[V]を超える場合は，データの電圧の範囲が0[V]～5[V]になるように調整します.)

以上の設定をすると、'DISPLAY'ボタンが押せるようになります。クリック後すぐに結果を確認できます。(データ量が多い場合にはコンパイルに時間を要する可能性があります)

## 備考
このプロジェクトは(MAKinteract Lab)[https://makinteract.kaist.ac.kr/](KAIST in South of Korea)で実施されたResearch Internshipです。